<ActorFrame> <children>
	<ActorFrame Condition="FUCK_EXE"> <children>
	<CODE Type="Quad"
	InitCommand="%function(self)
	
		self:hidden(1)
		
		sw = SCREEN_WIDTH
		sh = SCREEN_HEIGHT
		scx = sw/2
		scy = sh/2
		
		sl_playerisfailed = {false,false}
	
	end"
	OnCommand="hidden,1"
	MFailP1MessageCommand="%function(self)
		local failmode = stitch('config').FailOverlay
		if failmode == 1 then
			
			if sl_playerisfailed[2] or not GAMESTATE:IsHumanPlayer(1) then
				MESSAGEMAN:Broadcast('SLOverlayDed')
				GAMESTATE:ApplyGameCommand('sound,srt_hit')
			end
		
		elseif failmode == 2 then
			
			if sl_playerisfailed[2] or not GAMESTATE:IsHumanPlayer(1) then
				MESSAGEMAN:Broadcast('AFWasted')
				GAMESTATE:ApplyGameCommand('sound,gta_wasted')
			end
			
		end
			
		sl_playerisfailed[1] = true
	end"
	MFailP2MessageCommand="%function(self)
		local failmode = stitch('config').FailOverlay
		if failmode == 1 then
			
			if sl_playerisfailed[1] or not GAMESTATE:IsHumanPlayer(0) then
				MESSAGEMAN:Broadcast('SLOverlayDed')
				GAMESTATE:ApplyGameCommand('sound,srt_hit')
			end
		
		elseif failmode == 2 then
			
			if sl_playerisfailed[1] or not GAMESTATE:IsHumanPlayer(0) then
				MESSAGEMAN:Broadcast('AFWasted')
				GAMESTATE:ApplyGameCommand('sound,gta_wasted')
			end
			
		end
			
		sl_playerisfailed[2] = true
	end"
	StepP1Action5PressMessageCommand="%function(self)
		
		stitch('config').FailOverlay = (stitch('config').FailOverlay+1)%3
		
		SCREENMAN:SystemMessage('Failmode: '..stitch('config').FailOverlay)
	end"
	/>
	
	<Layer Type="Quad"
		InitCommand="%function(self)
			
			srt_lifebarPassing = {true,true}
			
		end"
	/>
	
	<Layer File="_eurostile outline" Text=""
	Condition="STATSMAN:GetCurStageStats():GetPlayerStageStats(0)"
	OnCommand="zoom,.5;xy,SCREEN_WIDTH/2 - 100,SCREEN_HEIGHT/2;sleep,.02;queuecommand,Make"
	MakeCommand="%function(self)
	
		local life = STATSMAN:GetCurStageStats():GetPlayerStageStats(0):GetCurrentLife()
		
		self:settext('')
		
		if life == 0 then
			srt_lifebarPassing[1] = false
			Trace('P1 DED (srt)')
			MESSAGEMAN:Broadcast('MFailP1')
		end
		
		if srt_lifebarPassing[1] then
			self:sleep(0.04);
			self:queuecommand('Make');
		end
		
	end"
	/>
	
	<Layer File="_eurostile outline" Text=""
	Condition="STATSMAN:GetCurStageStats():GetPlayerStageStats(1)"
	OnCommand="zoom,.5;xy,SCREEN_WIDTH/2 + 100,SCREEN_HEIGHT/2;sleep,.02;queuecommand,Make"
	MakeCommand="%function(self)
		local life = STATSMAN:GetCurStageStats():GetPlayerStageStats(1):GetCurrentLife()
		
		self:settext('')
		
		if life == 0 then
			srt_lifebarPassing[2] = false
			Trace('P2 DED (srt)')
			MESSAGEMAN:Broadcast('MFailP2')
		end
		
		if srt_lifebarPassing[2] then
			self:sleep(0.04);
			self:queuecommand('Make');
		end
		
	end"
	/>
	
	
	
</children> </ActorFrame>
</children> </ActorFrame>

